---
- name: Create {{ container_name }} container
  become: yes
  docker_container:
    name: "{{ container_name }}"
    network_mode: host
    state: present
    pull: yes
    image: simbelmas/shotwell
    ipc_mode: private
    env:
      DISPLAY: "unix{{ unix_display.stdout }}"
      UID: "{{ service_user_data.uid }}"
      GID: "{{ service_user_data.group }}"
    volumes:
    - "{{ service_user_data.home }}/.pulse:/home/svc/.pulse"
    - "/run/user/{{ service_user_data.uid }}/pulse:/run/user/{{ service_user_data.uid }}/pulse"
    - "{{ service_user_data.home }}/.config/gtk-3.0/:/home/svc/.config/gtk-3.0:ro"
    - "/run/user/{{ service_user_data.uid }}/bus:/run/user/{{ service_user_data.uid }}/bus"
    - "/run/user/{{ service_user_data.uid }}/dconf:/run/user/{{ service_user_data.uid }}/dconf"
    - /var/run/dbus:/var/run/dbus
    - /etc/machine-id:/etc/machine-id:ro
    - /etc/localtime:/etc/localtime:ro
    - /tmp/.X11-unix:/tmp/.X11-unix
    - /dev/snd:/dev/snd
